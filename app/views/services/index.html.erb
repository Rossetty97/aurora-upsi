<% if current_user && current_user.role=="Admin" %>
  <%= render "shared/nav_admin" %>
<% elsif current_user && current_user.role=="User" %>
  <%= render "shared/nav_user" %>
<% else %>
  <%= render "shared/nav_public" %>
<% end %>

<div class="container-fluid" style="padding-top: 80px">
  <div class="row justify-content-center">
    <div class="col-lg-12">
      <p class="h6 mt-4">List of Services</h1>
      <table class="table">
        <thead>
          <tr>
            <th>QR Code</th>
            <th>Service Name</th>
            <th>Capacity (Minutes)</th>
            <th>Current usage (Minutes)</th>
            <th colspan="3">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @services.each do |service| %>
            <tr>
              <td><%= image_tag(service.qr_code) if service.qr_code.attached? %></td>
              <td><%= service.name %></td>
              <td><%= service.capacity %></td>
              <td><%= service.current_usage %></td>
              <td>
                <%= link_to "View", service, :class=>"btn btn-sm btn-primary col-12"%>
                <%= link_to "Edit", edit_service_path(service), :class=>"btn btn-sm btn-info col-12 my-1" %>
                <%= link_to "Delete", service, method: :delete, data: { confirm: 'Are you sure?' }, :class=>"btn btn-sm btn-danger col-12" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="container-fluid">
  <%= link_to new_service_path, :class=>"btn btn-primary" do %>
    <i class="fas fa-arrow-circle-right"></i> Add New Service
  <% end %>

  <%= link_to root_path, :class=>"btn btn-dark" do %>
    <i class="fas fa-arrow-circle-left"></i> Back
  <% end %>
</div>
